define(["jquery"],function(e){var t=13,a=32,n={layoutMode:"vertical",imageFit:"cover",imageHeight:200,borderRadius:8,animationSpeed:300,autoslide:0,showButton:!0,showCards:!0,showCategory:!0,showContact:!0,showContactPicture:!0,showLastmodified:!0},o=function(e){return"boolean"==typeof e?e:"number"==typeof e?1===e:"string"==typeof e&&("1"===e||"true"===e.toLowerCase())},i=function(e,t){var a=parseInt(e,10);return isNaN(a)?t:a},r=function(e){return"click"===e.type||"keydown"===e.type&&(e.which===t||e.which===a)};return{init:function(t,a,d){if(Array.isArray(a)&&0!==a.length){var s=e("#"+t);if(s.length){var u=e.extend({},n,d||{});u.imageHeight=i(u.imageHeight,n.imageHeight),u.borderRadius=i(u.borderRadius,n.borderRadius),u.animationSpeed=i(u.animationSpeed,n.animationSpeed),u.autoslide=i(u.autoslide,n.autoslide),u.showButton=o(u.showButton),u.showCards=o(u.showCards),u.showCategory=o(u.showCategory),u.showContact=o(u.showContact),u.showContactPicture=o(u.showContactPicture),u.showLastmodified=o(u.showLastmodified);var c={currentIndex:0,coursesCount:a.length,autoslideTimer:null},l=s.find(".main-course-wrapper");if(l.length){var f=s.find(".slider-indicators"),m=u.showCards?s.find(".course-cards"):e();m.length||(m=null);var p=function(t){l.attr("data-course-id",t.id),l.find(".main-course-image img").attr("src",t.courseimage).attr("alt",t.fullname);var a=l.find(".main-course-title a.course-title-link");if(a.length?a.attr("href",t.viewurl).text(t.fullname):l.find(".main-course-title").text(t.fullname),l.find(".main-course-description").text(t.summary||""),u.showButton){var n=l.find(".button-container a");n.length&&n.attr("href",t.enrollurl)}!function(t){var a=l.find(".course-meta-info");if(a.empty(),u.showCategory&&t.category){var n=e("<div>").addClass("meta-item meta-category");e("<i>").addClass("fa fa-folder-open").appendTo(n),e("<span>").text(t.category).appendTo(n),a.append(n)}if(u.showContact&&t.contact&&t.contact.name){var o=e("<div>").addClass("meta-item meta-contact");e("<i>").addClass("fa fa-user").appendTo(o),u.showContactPicture&&t.contact.pictureurl&&e("<img>").addClass("contact-picture").attr("src",t.contact.pictureurl).attr("alt",t.contact.name).appendTo(o),e("<a>").addClass("contact-name").attr("href",t.contact.profileurl).text(t.contact.name).appendTo(o),a.append(o)}if(u.showLastmodified&&t.lastmodified){var i=e("<div>").addClass("meta-item meta-lastmodified");e("<i>").addClass("fa fa-calendar").appendTo(i),e("<span>").text(t.lastmodified).appendTo(i),a.append(i)}}(t)},h=function(){if(c.coursesCount){var t,n=a[c.currentIndex];c.coursesCount<=1||(f.find(".dot").removeClass("active"),f.find('.dot[data-index="'+c.currentIndex+'"]').addClass("active")),t=function(){p(n)},u.animationSpeed<=0?t():(l.css("opacity",0),window.setTimeout(function(){t(),l.animate({opacity:1},u.animationSpeed)},u.animationSpeed/2)),function(){if(m){m.empty();for(var t=Math.min(3,c.coursesCount-1),n=1;n<=t;n++){var o=(c.currentIndex+n)%c.coursesCount,i=a[o],r=e("<div>").addClass("course-card").attr("data-course-id",i.id).attr("role","button").attr("tabindex","0").attr("aria-label",i.fullname),d=e("<div>").addClass("course-card-image");e("<img>").attr("src",i.courseimage).attr("alt",i.fullname).appendTo(d),r.append(d),e("<div>").addClass("course-card-title").text(i.fullname).appendTo(r),m.append(r)}}}()}},v=function(){u.autoslide<=0||c.coursesCount<=1||(c.autoslideTimer=window.setInterval(function(){c.currentIndex=(c.currentIndex+1)%c.coursesCount,h()},u.autoslide))},C=function(){c.autoslideTimer&&(window.clearInterval(c.autoslideTimer),c.autoslideTimer=null),v()};s.on("click keydown",".slider-nav.prev",function(e){r(e)&&(e.preventDefault(),c.currentIndex=(c.currentIndex-1+c.coursesCount)%c.coursesCount,h(),C())}),s.on("click keydown",".slider-nav.next",function(e){r(e)&&(e.preventDefault(),c.currentIndex=(c.currentIndex+1)%c.coursesCount,h(),C())}),s.on("click keydown",".course-card",function(t){r(t)&&(t.preventDefault(),function(e){for(var t=0;t<a.length;t++)if(a[t].id==e){c.currentIndex=t,h(),C();break}}(e(this).attr("data-course-id")))}),s.on("click",".slider-indicators .dot",function(t){t.preventDefault();var a=parseInt(e(this).attr("data-index"),10);isNaN(a)||a===c.currentIndex||(c.currentIndex=a,h(),C())}),s.on("mouseenter",".main-course-wrapper",function(){c.autoslideTimer&&window.clearInterval(c.autoslideTimer)}),s.on("mouseleave",".main-course-wrapper",function(){u.autoslide>0&&v()}),l.removeClass("layout-vertical layout-horizontal layout-card layout-minimal").addClass("layout-"+u.layoutMode),l.find(".main-course").css("border-radius",u.borderRadius+"px"),l.find(".main-course-image").css("height",u.imageHeight+"px"),l.find(".main-course-image img").css("object-fit",u.imageFit),c.coursesCount>1?function(){if(c.coursesCount<=1)f.hide();else{f.empty();for(var t=0;t<c.coursesCount;t++){var n=e("<div>").addClass("dot").attr("data-index",t);e("<span>").addClass("tooltip").text(a[t].fullname).appendTo(n),t===c.currentIndex&&n.addClass("active"),f.append(n)}}}():(s.find(".slider-nav").hide(),f.hide()),h(),v()}}}}}});